# URI

URI中文全称为**统一资源标识符**，其具体作用就是用于定位资源所在的位置。URI存在2类子集——URL及URN。HTTP仅处理URI中的URL子集。

## URL

### URL简介

URL全称统一资源定位符，且几乎所有的URI都是URL。URL提供定位因特网上所有资源的方式。存在多种不同的URL方案，每种方案的语法又不尽相同。通用的URL语法如下：
    
    <scheme>://<user>:<password>@<host>:<port>/<path>;<param>?<query>#<frag>

其中**param**为参数组件，例如：http://host/path;b=1/to;c=2/，一般而言用于针对路径所指向资源的增加额外约束条件，以返回资源的不同形态。不过，参数组件一般不被使用。

其中共含有九个组件，但是并不存在一种特定的URL完全包含上面的所有组件，一般仅仅包含其中的几个部分而已。

### 相对URL

在html文档中，超链接可以表现为2中形式，相对URL和绝对URL。首先HTTP客户端对资源的访问必须知道资源的确切位置，因而相对URL会被解析为绝对URL再进行资源访问，其解析的依据就是基础URL。

有几种方式可以提供基础URL：

* 使用HTML的**<base>**标签来显示的指定
* 已当前文档的URL为基准进行解析

相对URL不仅仅指的是仅有路径形式的URL，例如，没有**scheme**、仅存在**path**、仅存在**query**等都是相对的URL。

针对相对URL的解析的算法如下（带解析的URL已是相对URL）：

* 相对URL的所有组件都为空，则采纳全部的基础URL组件（注，现代浏览器针对**script**及**img**标签进行了优化，如果未指定相对URL，则不加载任何内容）
* 相对URL的**scheme**为空，则采纳基础URL的**scheme**，同时检查**user**、**password**、**host**、**port**组件
* 上一条中，如果所有的组件都为空，则继承基础URL中的这些组件，并检查**path**组件，否则解析结束，返回最终URL。
* 继续检查**path**组件，
    * 如果相对URL中的**path**是绝对路径（即以“/”开头），则**path**部分绝对处理。解析结束，返回最终URL
    * 如果相对URL中的**path**是相对路径（以“./”或其他字符开头），则相对于当前的基础URL的**path**部分做处理，解析结束返回最终的URL。
    * 如果**path**为空，则继承基础URL中的**path**，继续处理**param**
* 继续处理**param**组件，
    * 如果**param**非空，解析结束返回最终的URL
    * 如果**param**为空，则继承基础URL中的**param**，并继续解析**query**
* 继续解析**query**，
    * 如果**query**非空，解析结束返回最终的URL
    * 如果**query**为空，则继承基础URL中的**query**，并返回最终的URL

例如：我们尝试解析下**?a=1**相对URL，基础URL为**http://host:8080/c?d=1**
* 首先，**scheme**为空，则继承**scheme**，得到第一个组件：**http**
* 其次，**host**、**port**为空，则继承**host**及**port**, 得到**http://host:8080**
* 然后，**path**为空，继承**path**, 得到**http://host:8080/c**
* 最后，**query**不为空，则将**query**和目前抽取到的基础URL进行组合，得到**http://host:8080/c?a=1**，解析结束



## URN

URN全称统一资源名

例如，RFC 2141文档的用URN的表示方法：urn:ietf:rfc:2141。无论该文档位于何处，使用和URL表示，URN表示法都可以定位到该文档。


