# 12.2 数字类型

标准数字类型：INTEGER, SMALLINT, DECIMAL, NUMERIC

数据类型：FLOAT, REAL, DOUBLE_PRECISION

INT是INTEGER的同义词。
DEC和FIXED是DECIMAL的同义词。
MySQL将DOUBLE作为DOUBLE_PRECISION的同义词，这是非标准的。
同时将REAL作为DOUBLE_PRECISION的同义词，这是需要关闭REAL_AS_FLOAT配置。

BIT类型存储比特值，用于MyISAM，MEMORY，InnoDB以及NDB引擎的表格。

## 整形-INTEGER, INT, SMALLINT, TINYINT, MEDIUMINT, BIGINT

值范围：

| 类型 | 存储 | 中间值 | 最大值 |
| --- | --- | --- | --- |
| TINYINT | 1 | -128 | 127 |
| | | 0 | 255 |
| SMALLINT | 2 | -2^15 | 2^15-1 |
| | | 0 | 2^16-1 | 
| MEDIUMINT| 3 | -2^23 | 2^23 - 1 |
| | | 0 | 2^24 - 1|
| INT | 4 | -2^31 | 2^31 -1 |
| | | 0 | 2^32 -1 |
| BIGINT | 8 | -2^63 | 2^63 -1 |
| | | 0 | 2^64 - 1 | 

## 固定浮点型 - DECIMAL, NUMERIC

用于类似于金融数据的存储，需要保持确切的精度。

可以指定具体的精度和刻度，例如：

	salary DECIMAL(5,2)

当指定小数位数大于D值时，则会被转换为D位，具体依赖于操作系统的处理，一般是直接裁减掉。

## 浮点型 - FLOAT, DOUBLE

MySQL对单精度的值使用四个字节，对双精度的值使用八个字节。

对于FLOAT，SQL标准允许控制精度（但是不是实际的指数），主要通过FLOAT后面的括号中的bit数。MySQL当然也支持这样，但是其值仅仅拥有决定存储的尺寸。0到23的精度形成四个字节的单精度FLOAT类型列。24到53的精度形成8字节的DOUBLE类型列。

MySQL接受非标准的：FLOAT(M,D)以及REAL(M,D)或者DOUBLE PRECISION(M,D)。存储是对于超出小数范围的数会进行四舍五入运算，来进行转换。

因为浮点型是近似值而不是确切值，所以如果将他们作为确切值来进行对比操作可能会导致问题。

## 比特类型 - BIT

BIT(M)，其中M在1到64之间。

可以通过b'value'的形式来指定比特值。例如b'111'和b'1000000'。

如果给其赋值，并且比特数小于M，则数字左边的内容会用0来替换。

## 数字类型属性

MySQL支持设置整形数字的显示长度，但这个长度并不会限制类型的实际存值范围，当设置值大于显示宽度是也不会导致错误的裁剪。显示宽度主要用于当设置值小于宽度并且需要在左边补齐零位时。

当和ZEROFILL一起使用时，默认的对齐空格都由零代替。例如，对于`INT(4) ZEROFILL`，5的显示就是0005。

所有的整数类型都有一个可选的（非标准的）属性UNSIGNED。

浮点型以及固定浮点型也可以指定UNSIGNED。就是阻止设置负值到列中，但是值的存值范围并不会改变。

如果指定了ZEROFILL，则会自动加上UNSIGNED属性。

整形和浮点型数据类型可以有额外的AUTO_INCREMENT属性。

## 超出范围和溢出处理

结果依赖于SQL模式：

* 如果是严格SQL，MySQL会拒绝超出的值并抛出异常，会依据SQL标准来完成
* 否则，MySQL剪切值到一个合适的数值范围并存储最终的结果。

> 当超出范围的值赋到一个整形的列中，MySQL会使用该数字类型范围的最大表示值来作为替代存储，同样适用于浮点型。

中间数字表达式中的溢出都会被当做错误抛出。

例如，整形的最大表示范围为9223372036854775807（2^63-1），所以如下会抛出错误：

```
mysql > SELECT 9223372036854775807 + 1;
```

可以通过转换来处理这种情况

```
mysql > SELECT CAST(9223372036854775807 AS UNSIGNED) + 1;
```



